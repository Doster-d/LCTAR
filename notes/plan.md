# 1. Резюме

Мы превращаем скульптуры СоюзмультПарка в точку продаж. Посетитель сканирует QR. В браузере запускается модуль для работы с дополненной реальностью. Камера распознает AprilTag, установленный у подножья скульптуры. Рядом с персонажем и человек появляются виртуальные объекты, наполняющие сцену динамикой и интересом к технологиям. Гость делает фото. Вы показываете промокод на билеты и мерч. Мы сокращаем путь к покупке до минут. Бюджет контролируем. Риски закрываем инженерно. Метрики прозрачны.

# 2. Бизнес-модель и эффект

Доходы. Продажи билетов и мерча после AR-сессии. Партнерские интеграции.
Ключевая механика. Временный промокод сразу после фото. Прямая конверсия из эмоции в чек.
Формула выручки после AR:
`Revenue = QR × p_cam × p_detect × p_photo × p_click × p_pay × AOV × (1 − discount)`.
Вы управляете каждым множителем настройками контента, скорости сцен и UI.

# 3. Пользовательский путь и случаи использования

Цель. Упростить переход от сканирования к покупке. Снять трение по разрешениям. Дать понятный шаг к билету.

```uml
@startuml
left to right direction
skinparam linetype ortho
actor Посетитель
actor "Платежный шлюз" as PSP
actor "CRM билетов" as CRM
rectangle "WebAR система" {
  usecase "Сканировать QR" as UC1
  usecase "Запустить камеру" as UC2
  usecase "Распознать скульптуру" as UC3
  usecase "Отобразить AR эффект" as UC4
  usecase "Сделать фото" as UC5
  usecase "Показать промокод" as UC6
  usecase "Купить билет" as UC7
}
Посетитель --> UC1
Посетитель --> UC2
UC2 --> UC3
UC3 --> UC4
Посетитель --> UC5
UC5 --> UC6
Посетитель --> UC7
UC7 --> PSP
UC7 --> CRM
@enduml
```

# 4. Последовательность QR → AR → покупка

Оптимизация. Загружаем лёгкий лендинг, запрашиваем камеру после клика. Подгружаем GLB по частям. Возвращаем промокод с сервера вместе с атрибуцией.

![Диаграмма последовательности](./src/sequence.png)

# 5. Продукт и архитектура

Требования. Запуск без установки. Время старта до 3 секунд на 4G. FPS не ниже 24. Размер сцены до 5 МБ.
Технологии. WebGL и Three.js в браузере. Трекинг AprilTags и image-tracking. Бэкенд выдает промокод и ведет атрибуцию.

```uml
@startuml
left to right direction
skinparam linetype ortho
package "Клиент" {
  [Лендинг] --> [WebAR клиент]
  [WebAR клиент] --> [Модуль камеры]
  [WebAR клиент] --> [Рендерер Three.js]
  [WebAR клиент] --> [Трекинг AprilTags / mind-ar-js]
}
package "Сервер" {
  [Бэкенд API]
  [Хранилище фото]
  [Сервис промокодов]
  [CRM коннектор]
  [Платежный коннектор]
}
[CDN ассетов GLB] - [WebAR клиент]
[Трекинг AprilTags / mind-ar-js] - [Модуль камеры]
[WebAR клиент] - [Бэкенд API]
[Бэкенд API] - [Хранилище фото]
[Бэкенд API] - [Сервис промокодов]
[Бэкенд API] - [CRM коннектор]
[Бэкенд API] - [Платежный коннектор]
@enduml
```

# 6. Развертывание

Изоляция рисков. CDN рядом с парком. Бэкенд в облаке. Фото храним отдельно. Платежи и CRM по защищенным каналам.

![Диаграмма развёртывания](./src/deploy.png)

# 7. Данные и аналитика

Мы собираем минимум. Сессия, устройство, скульптура, средний FPS, факт фото, показ промокода, клик, покупка. Эти поля закрывают расчет воронки и ROI.

![Логическкая схема БД](./src/logicDB.png)

Ключевые метрики.
p_cam раздача разрешения камеры. p_detect стабильность трекинга. p_photo факт фото. p_click CTR к покупке. p_pay конверсия в оплату. AOV средний чек. Время старта сцены. FPS. Uptime.

# 8. Процессы и UX

Мы ведем пользователя простыми шагами. Даем подсказки по свету. Держим один экран на один выбор. Фолбэк есть.

![Диграмма процесса](./src/prcocess.png)

Стабильность трекинга управляется порогами дрожания и тайм-аутами.

# 9. План внедрения

Неделя 1. Подготовка моделей, 3D-печать меток, монтаж QR-кода для перехода на сервис.
Неделя 2. Веб-клиент, первая сцена, CDN, аналитика.
Неделя 3. Интеграция CRM и платежей, промокоды, A/B кнопок.
Неделя 4. Полевые тесты, обучение персонала, релиз.
Эксплуатация. Контентные апдейты, ротация промо, поддержка.

# 10. Тест-план

Кросс-браузер и кросс-девайс. Свет, фон, толпа. Время старта. FPS. Стабильность трекинга. Качество фото. Корректность промокода. Путь оплаты. Нагрузочное тестирование. Ретеншен на повторных визитах.

# 11. Риски и как мы их снимаем

Слабый интернет. Кэш и CDN, отложенная подгрузка.
Старые смартфоны. LOD и упрощенные шейдеры.
Потеря трекинга. Порог дрожания, фолбэк на простой маркер.
Юридические вопросы по фото. Ясное согласие в UI и срок хранения.
Персонал на площадке. Скрипт подсказок и быстрый FAQ.

# 12. Безопасность и приватность

Фото по согласию. Минимум персональных данных. Хранение фото ограниченное по сроку. Шифрование в транзите и в покое. Журналы доступа. Удаление по запросу.

# 13. Экономика и управление

Затраты. Производство 3D, разработка WebAR, интеграции, поддержка, CDN.
Капекс низкий, Опекс предсказуем. Вы регулируете дисконт и длительность промо.
Управление. Дашборд по воронке. Еженедельные отчеты. План экспериментов по p_click и p_pay.

# 14. Что нужно от инвестора

Финансирование пилота и масштабирование по скульптурам. Доступ к CRM и шлюзу. Согласование оффера и промокодов. Слот в маркетинговом плане парка. KPI по CR и выручке после AR.

# 15. Что получает разработчик

Ясные интерфейсы. Строгие SLA по размеру и времени старта. Набор тестовых сцен и меток. Четкие события аналитики. Диаграммы выше закрывают границы модулей и данные.

Готовы упаковать это в PDF и разослать. Если хотите цифры под ваш трафик, пришлите фактические QR-сканы и средний чек.
