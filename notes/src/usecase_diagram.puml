@startuml
title LCTAR - Use Case Diagram
left to right direction
skinparam linetype ortho

' Actors
actor "Посетитель" as Visitor #87CEFA
actor "Администратор" as Admin #FFA07A
actor "Система" as SystemActor #98FB98

' ===== System boundary with packages =====
rectangle "LCTAR Система" as LCTAR {
  package "Пользовательский интерфейс" {
    usecase UC1 as "Сканирование QR-кода"
    usecase UC2 as "Выбор языка"
    usecase UC3 as "Прохождение точки квеста"
    usecase UC5 as "Получение купона"
  }

  package "Бэкенд сервисы" {
    usecase UC4 as "Отслеживание прогресса"
    usecase UC9 as "Валидация купонов"
  }

  package "Админ-панель" {
    usecase UC6 as "Администрирование системы"
    usecase UC7 as "Просмотр статистики"
    usecase UC8 as "Управление контентом"
  }
}

' ===== Relationships =====
Visitor --> UC1 : инициирует
Admin --> UC6
Admin --> UC7
Admin --> UC8
SystemActor --> UC9

' Use case relations
UC1 ..> UC2 : <<include>>
UC3 ..> UC4 : <<include>>
UC5 ..> UC4 : <<extend>>
UC5 ..> UC9 : <<include>>

' ===== Notes =====
note right of UC1
  Сканирование QR-кода:
  • Открытие ссылки
  • Запуск WebAR приложения
  • Инициализация сессии
end note

note right of UC3
  Прохождение точки квеста:
  • Сканирование AprilTag/изображения
  • Запуск AR-сцены
  • Взаимодействие с 3D-контентом
  • Получение токена прогресса
end note

note right of UC5
  Получение купона:
  • Проверка завершения квеста
  • Генерация уникального токена
  • Отображение QR-кода купона
  • Сохранение в памяти устройства
end note

note right of Admin
  Администратор:
  • Управление настройками
  • Мониторинг работоспособности
  • Настройка контента и локализации
end note

' ===== Styling =====
skinparam backgroundColor #F8F9FA
skinparam DefaultFontName "DejaVu Sans"
skinparam DefaultFontSize 14
skinparam shadowing true
skinparam roundCorner 12

skinparam usecaseBackgroundColor #FFF3E0
skinparam usecaseBorderColor #F57C00
skinparam actorBorderColor #1976D2
@enduml
