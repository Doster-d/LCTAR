<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LCTAR Full-Stack: Документация проекта LCTAR</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="k1-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">LCTAR Full-Stack<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Документация полного стека (Django Backend + React Frontend)</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Поиск" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Документация проекта LCTAR </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Система захвата и просмотра AR-контента с элементами геймификации для повышения вовлеченности пользователей в музей СоюзМультФилма.</p>
<p>Полнофункциональная платформа для создания интерактивного опыта с использованием современных веб-технологий.</p>
<h2><a class="anchor" id="autotoc_md101"></a>
Описание проекта</h2>
<p>LCTAR - это инновационная платформа для просмотра и взаимодействия с AR-контентом, где пользователи могут просматривать 3D модели различных фигур с помощью мобильных устройств.</p>
<p>Система использует современную микросервисную архитектуру для обеспечения высокой производительности и масштабируемости.</p>
<p>Основные особенности:</p><ul>
<li><b>AR захват контента</b> - трансляция камеры с наложением виртуальных объектов</li>
<li><b>Геймификация</b> - система промокодов за прохождение контента</li>
<li><b>Аналитика</b> - сбор статистики использования и прогресса пользователей</li>
<li><b>Стабилизация AR</b> - алгоритмы сглаживания для устойчивого трекинга</li>
</ul>
<h2><a class="anchor" id="autotoc_md102"></a>
Документация</h2>
<p>Документация включает в себя:</p><ul>
<li><a class="el" href="backend.html">Документация по бэкенду (Django REST API)</a> Документация по бэкенду</li>
<li><a class="el" href="frontend.html">Документация фронтенда</a> Документация по фронтенду</li>
<li><a class="el" href="plan.html">Бизнес план проекта</a> Бизнес план проекта и архитектура</li>
</ul>
<h2><a class="anchor" id="autotoc_md103"></a>
Архитектура системы</h2>
<div class="fragment"><div class="line">┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐</div>
<div class="line">│   React SPA     │◄──►│   Django API     │◄──►│    MySQL 8.0    │</div>
<div class="line">│   (порт 3000)   │    │   (порт 8000)    │    │                 │</div>
<div class="line">└─────────────────┘    └──────────────────┘    └─────────────────┘</div>
<div class="line">         │                       │                       │</div>
<div class="line">         ▼                       ▼                       ▼</div>
<div class="line">┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐</div>
<div class="line">│   WebAssembly   │    │     Redis 7.0    │    │   RabbitMQ 3    │</div>
<div class="line">│   AprilTag      │    │   Cache/Broker   │    │   Message Queue │</div>
<div class="line">└─────────────────┘    └──────────────────┘    └─────────────────┘</div>
<div class="line">                                │</div>
<div class="line">                                ▼</div>
<div class="line">                       ┌──────────────────┐</div>
<div class="line">                       │   Celery Worker  │</div>
<div class="line">                       │   Async Tasks    │</div>
<div class="line">                       └──────────────────┘</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md104"></a>
Компоненты архитектуры</h3>
<ul>
<li><b>React SPA</b>: Современный интерфейс с Three.js для 3D визуализации</li>
<li><b>Django REST API</b>: Основной бэкенд сервер, обрабатывающий HTTP запросы</li>
<li><b>MySQL 8.0</b>: Реляционная база данных для хранения пользовательских данных</li>
<li><b>Redis 7.0+</b>: Кэширование и брокер результатов для Celery</li>
<li><b>RabbitMQ 3</b>: Брокер сообщений для асинхронных задач</li>
<li><b>Celery Workers</b>: Асинхронные рабочие процессы для фоновых задач</li>
<li><b>WebAssembly AprilTag</b>: Высокопроизводительная детекция AR-маркеров</li>
</ul>
<h2><a class="anchor" id="autotoc_md105"></a>
Быстрый старт</h2>
<h3><a class="anchor" id="autotoc_md106"></a>
Через Docker Compose (рекомендуется)</h3>
<div class="fragment"><div class="line"># Клонирование репозитория</div>
<div class="line">git clone &lt;repository-url&gt;</div>
<div class="line">cd LCTAR</div>
<div class="line"> </div>
<div class="line"># Создайте и настройте файл окружения</div>
<div class="line">cp .env.example .env</div>
<div class="line"> </div>
<div class="line"># Запуск всей системы через Docker</div>
<div class="line">docker-compose up --build</div>
<div class="line"> </div>
<div class="line"># Доступ к приложениям:</div>
<div class="line"># Frontend: http://localhost:3000</div>
<div class="line"># Backend API: http://localhost:8000</div>
<div class="line"># Django Admin: http://localhost:8000/admin/</div>
</div><!-- fragment --><p>После успешного запуска сервисы будут доступны на:</p><ul>
<li><b>React Frontend</b>: <a href="http://localhost:3000">http://localhost:3000</a></li>
<li><b>Django API</b>: <a href="http://localhost:8000">http://localhost:8000</a></li>
<li><b>MySQL</b>: localhost:3306</li>
<li><b>Redis</b>: localhost:6379</li>
<li><b>RabbitMQ Management</b>: <a href="http://localhost:15672">http://localhost:15672</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md107"></a>
Структура репозитория</h2>
<div class="fragment"><div class="line">LCTAR/</div>
<div class="line">├── arb/                    # Django бэкенд приложение</div>
<div class="line">│   ├── arb/               # Основной код бэкенда</div>
<div class="line">│   │   ├── models.py      # Модели данных (пользователи, сессии, промокоды)</div>
<div class="line">│   │   ├── views.py       # API представления и бизнес-логика</div>
<div class="line">│   │   ├── urls.py        # Маршрутизация URL</div>
<div class="line">│   │   ├── settings.py    # Конфигурация Django</div>
<div class="line">│   │   ├── middleware.py  # Пользовательский middleware</div>
<div class="line">│   │   ├── tasks.py       # Celery задачи</div>
<div class="line">│   │   └── migrations/    # Миграции базы данных</div>
<div class="line">│   ├── manage.py          # Django management скрипт</div>
<div class="line">│   └── requirements.txt   # Зависимости Python</div>
<div class="line">├── frontend/              # React SPA приложение</div>
<div class="line">│   ├── src/              # Исходный код frontend&#39;а</div>
<div class="line">│   │   ├── App.jsx       # Основной компонент AR-рекордера</div>
<div class="line">│   │   ├── SceneComponent.jsx # Компонент Three.js сцены</div>
<div class="line">│   │   ├── apriltagPipeline.jsx # Пайплайн обработки AprilTag</div>
<div class="line">│   │   └── api/          # Интеграция с бэкендом</div>
<div class="line">│   ├── public/           # Статические файлы и WASM-модули</div>
<div class="line">│   │   ├── apriltag_wasm.js    # JavaScript мост для AprilTag</div>
<div class="line">│   │   ├── apriltag_wasm.wasm  # WebAssembly модуль детекции</div>
<div class="line">│   │   └── models/       # 3D модели (GLTF/GLB формат)</div>
<div class="line">│   ├── package.json      # Зависимости Node.js</div>
<div class="line">│   └── webpack.config.js # Конфигурация сборки</div>
<div class="line">├── docker-compose.yml     # Оркестрация всех сервисов</div>
<div class="line">├── README-backend.md      # Подробная документация бэкенда</div>
<div class="line">└── frontend/README.md     # Подробная документация frontend&#39;а</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md108"></a>
Основные возможности</h2>
<h3><a class="anchor" id="autotoc_md109"></a>
Frontend (React + Three.js)</h3>
<ul>
<li><b>AR захват контента</b> - трансляция камеры с наложением виртуальных объектов</li>
<li><b>Детекция AprilTag</b> - WebAssembly детекция маркеров для позиционирования</li>
<li><b>Стабилизация AR</b> - алгоритмы сглаживания для устойчивого трекинга</li>
<li><b>Запись AR-видео</b> - захват видео с аудио в WebM/MP4 формате</li>
<li><b>Управление сценами</b> - гибкая система конфигурации сцен и объектов</li>
<li><b>AlvaAR интеграция</b> - улучшенное отслеживание плоскостей и поз камеры</li>
</ul>
<h3><a class="anchor" id="autotoc_md110"></a>
Backend (Django REST API)</h3>
<ul>
<li><b>Управление сессиями</b> - отслеживание сессий просмотра AR-контента</li>
<li><b>Геймификация</b> - система промокодов за прохождение контента</li>
<li><b>Аналитика</b> - сбор статистики использования и прогресса пользователей</li>
<li><b>Пользовательские данные</b> - профили и персонализация опыта</li>
<li><b>Асинхронная обработка</b> - Celery задачи для отправки email и фоновых операций</li>
</ul>
<h2><a class="anchor" id="autotoc_md111"></a>
Технологический стек</h2>
<h3><a class="anchor" id="autotoc_md112"></a>
Backend</h3>
<ul>
<li><b>Django 5.2.6+</b> - высокоуровневый веб-фреймворк на Python</li>
<li><b>Django REST Framework 3.15+</b> - мощный инструментарий для создания Web API</li>
<li><b>MySQL 8.0</b> - надежная реляционная база данных</li>
<li><b>Redis 7.0+</b> - хранилище данных в памяти для кэширования</li>
<li><b>RabbitMQ 3</b> - надежный брокер сообщений</li>
<li><b>Celery 5.3+</b> - распределенная система обработки задач</li>
<li><b>Python 3.13+</b> - современная версия языка программирования</li>
</ul>
<h3><a class="anchor" id="autotoc_md113"></a>
Frontend</h3>
<ul>
<li><b>React 18+</b> - пользовательский интерфейс</li>
<li><b>Three.js 0.180.0</b> - 3D графика и рендеринг</li>
<li><b>React Three Fiber 9.3.0</b> - React интеграция для Three.js</li>
<li><b>OpenCV 4.11.0</b> - компьютерное зрение в браузере</li>
<li><b>WebAssembly</b> - высокопроизводительная обработка AprilTag</li>
<li><b>Webpack 5.95.0</b> - сборка и бандлинг</li>
</ul>
<h3><a class="anchor" id="autotoc_md114"></a>
DevOps</h3>
<ul>
<li><b>Docker &amp; Docker Compose</b> - контейнеризация и оркестрация</li>
<li><b>Poetry</b> - управление зависимостями Python</li>
<li><b>Ruff</b> - линтинг и форматирование кода</li>
<li><b>Doxygen</b> - генерация документации</li>
</ul>
<h2><a class="anchor" id="autotoc_md115"></a>
Установка и настройка</h2>
<h3><a class="anchor" id="autotoc_md116"></a>
Предварительные требования</h3>
<ul>
<li>Docker и Docker Compose</li>
<li>Git</li>
<li>Node.js 18+ и npm 9+ (для локальной разработки frontend'а)</li>
</ul>
<h3><a class="anchor" id="autotoc_md117"></a>
Локальная разработка</h3>
<div class="fragment"><div class="line"># 1. Клонировать репозиторий и перейти в директорию</div>
<div class="line">git clone &lt;repository-url&gt;</div>
<div class="line">cd LCTAR</div>
<div class="line"> </div>
<div class="line"># 2. Настроить окружение</div>
<div class="line">cp .env.example .env</div>
<div class="line"> </div>
<div class="line"># 3. Запустить сервисы базы данных и очереди</div>
<div class="line">docker-compose up -d mysql redis rabbitmq</div>
<div class="line"> </div>
<div class="line"># 4. Установить зависимости бэкенда и применить миграции</div>
<div class="line">cd arb</div>
<div class="line">poetry install</div>
<div class="line">python manage.py migrate</div>
<div class="line">python manage.py createsuperuser</div>
<div class="line"> </div>
<div class="line"># 5. Запустить бэкенд и Celery</div>
<div class="line">python manage.py runserver &amp;</div>
<div class="line">celery -A arb worker -l info &amp;</div>
<div class="line"> </div>
<div class="line"># 6. Установить зависимости frontend&#39;а и запустить</div>
<div class="line">cd ../frontend</div>
<div class="line">npm install</div>
<div class="line">npm start &amp;</div>
<div class="line"> </div>
<div class="line"># 7. Открыть браузер:</div>
<div class="line"># Frontend: http://localhost:3000</div>
<div class="line"># Backend API: http://localhost:8000/api/</div>
<div class="line"># Django Admin: http://localhost:8000/admin/</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md118"></a>
Продакшн развертывание</h3>
<div class="fragment"><div class="line"># Сборка и запуск всех сервисов</div>
<div class="line">docker-compose -f docker-compose.prod.yml up --build -d</div>
<div class="line"> </div>
<div class="line"># Сборка статических файлов (если необходимо)</div>
<div class="line">docker-compose exec app python manage.py collectstatic --noinput</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md119"></a>
API Endpoints</h2>
<h3><a class="anchor" id="autotoc_md120"></a>
Основные эндпоинты</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Метод   </th><th class="markdownTableHeadNone">Эндпоинт   </th><th class="markdownTableHeadNone">Описание    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone"><code>/session/start/</code>   </td><td class="markdownTableBodyNone">Создание новой сессии просмотра    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone"><code>/view/</code>   </td><td class="markdownTableBodyNone">Регистрация просмотра актива пользователем    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone"><code>/user/email/</code>   </td><td class="markdownTableBodyNone">Привязка email к сессии пользователя    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone"><code>/progress/</code>   </td><td class="markdownTableBodyNone">Получение прогресса просмотра активов    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone"><code>/promo/</code>   </td><td class="markdownTableBodyNone">Получение промокода за прохождение    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone"><code>/stats/</code>   </td><td class="markdownTableBodyNone">Сводная статистика просмотров   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md121"></a>
Документация компонентов</h2>
<ul>
<li><b><a class="el" href="README-backend_8md.html">README-backend.md</a></b> - подробная документация Django бэкенда</li>
<li><b>frontend/README.md</b> - подробная документация React frontend'а</li>
</ul>
<h2><a class="anchor" id="autotoc_md122"></a>
Лицензия и вклад</h2>
<p>Проект разработан командой LCTAR для создания инновационных AR-решений.</p>
<h3><a class="anchor" id="autotoc_md123"></a>
Лицензия</h3>
<p>Этот проект является проприетарным. Все права защищены.</p>
<h3><a class="anchor" id="autotoc_md124"></a>
Вклад в разработку</h3>
<p>Мы приветствуем вклад в развитие проекта:</p><ol type="1">
<li>Форкните репозиторий</li>
<li>Создайте feature branch (<code>git checkout -b feature/amazing-feature</code>)</li>
<li>Закоммитьте изменения (&lsquo;git commit -m 'Add amazing feature&rsquo;<code>)</code></li>
<li><code>Запушьте branch (</code>git push origin feature/amazing-feature`)</li>
<li>Создайте Pull Request</li>
</ol>
<h3><a class="anchor" id="autotoc_md125"></a>
Контакты команды разработки</h3>
<p>Для вопросов и предложений обращайтесь к команде разработки.</p>
<hr  />
<p><b>LCTAR</b> - инновационная платформа для создания увлекательного AR-опыта с современными веб-технологиями. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
